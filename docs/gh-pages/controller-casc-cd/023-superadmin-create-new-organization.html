<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Day-2: Create a new Organization :: Automation Controller configuration Continuous Deployment with CasC</title>
    <link rel="canonical" href="https://automationiberia.github.io/controller-casc-cd/controller-casc-cd/023-superadmin-create-new-organization.html">
    <link rel="prev" href="022-deploy-superadmin-objects.html">
    <link rel="next" href="031-regularuser-day-zero.html#_export_all_the_variables_to_be_used_in_the_next_steps">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://automationiberia.github.io/controller-casc-cd">Automation Controller configuration Continuous Deployment with CasC</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="controller-casc-cd" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Automation Controller configuration Continuous Deployment with CasC</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html#_quick_introduction_to_cac">1. Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2. CasC setup part 1 (to be executed by a controller admin user)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">DayZero</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_pre_requisites">Pre-Requisites</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_export_all_the_variables_to_be_used_in_the_next_steps">Export all the variables to be used in the next steps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_housekeeping">Housekeeping</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_create_the_ansible_inventory_file_for_the_environment">Create the ansible inventory file for the environment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_create_the_automation_directories_structure">Create the automation directories structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_configure_ansible_connection_to_the_aap_controllers_common_and_per_environment_variables">Configure ansible connection to the AAP Controllers (common and per environment variables)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_create_the_cac_playbooks">Create the CaC playbooks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_define_controller_objects_as_code">Define Controller Objects as Code</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_commit_and_push_the_initial_version_of_cac">Commit and push the initial version of CaC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="021-initial-dir-and-files.html#_change_the_default_branch_at_the_gitlab_repository">Change the default branch at the GitLab repository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="022-deploy-superadmin-objects.html">Deploy the SuperAdmin objects</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Day Two</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="023-superadmin-create-new-organization.html">Create New Organization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">3. CasC setup part 2 (to be executed by a regular organization&#8217;s admin user)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Day Zero</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_export_all_the_variables_to_be_used_in_the_next_steps">Export all the variables to be used in the next steps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_clone_the_repository_and_create_a_new_branch">Clone the newly assigned GitLab Repository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_creating_the_vault_password_file">Creating the .vault_password file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_edit_credentials_to_connect_to_the_controller_for_day_zero">Edit credentials to connect to the controller for day zero</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_edit_credentials_objects">Edit credentials objects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_check_the_inventory_file">Check the inventory file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_creating_the_vault_password_file">Creating the <code>.vault_password</code> file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_launch_ansible_navigator_from_cli_to_setup_day_zero_of_casc">Launch ansible-navigator from CLI to setup day-zero of CasC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_push_the_changes">Push the changes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_pomote_the_casc_dev_day0_branch_to_dev_dev_branch">Pomote the <code>casc-dev-day0</code> branch to dev (<code>dev</code> branch)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="031-regularuser-day-zero.html#_promote_the_dev_branch_to_pro_pro_branch">Promote the <code>dev</code> branch to pro (<code>pro</code> branch)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">DayTwo</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="032-regularuser-day-two.html">Populate new organization objects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="033-regularuser-day-two-deploy-objects.html">Push the changes to create the new objects</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Automation Controller configuration Continuous Deployment with CasC</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Automation Controller configuration Continuous Deployment with CasC</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Automation Controller configuration Continuous Deployment with CasC</a></li>
    <li>2. CasC setup part 1 (to be executed by a controller admin user)</li>
    <li>Day Two</li>
    <li><a href="023-superadmin-create-new-organization.html">Create New Organization</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/ivan/GIT/ivarmu/community/aap-casc-workshop/controller-casc-cd/documentation/modules/ROOT/pages/023-superadmin-create-new-organization.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Day-2: Create a new Organization</h1>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>New organizations are created from the <code>dev</code> Ansible Controller instance, and will be promoted to the <code>pro</code> one in next steps.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are two ways to create a new Organization, which will be described below in the following sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#tabset1_automatically">Automatically</a>: A Job Template to create all the required components for a new regular organization is provided.</p>
</li>
<li>
<p><a href="#tabset1_manually">Manually</a>: All the required components for a new regular organization are created step-by-step.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As an overview, when creating a new Organization, some objects must be populated at the superadmin organization, such as the organization itself, the corresponding CasC Job Templates, the user to be the future organization admin and the roles to give that user the admin privileges to the organization. A new Git Repository is needed for the new Organization as well.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_automatically"></a>Automatically</p>
</li>
<li>
<p><a id="tabset1_manually"></a>Manually</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_automatically">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the Job Template called <code>&lt;ORGNAME&gt; dev WF New Project</code> and Launch it.</p>
<div class="imageblock">
<div class="content">
<img src="_images/new-project-workflow-1.png" alt="new project workflow 1">
</div>
</div>
</li>
<li>
<p>Fill in all the required information and Start the Job:</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The fields <code>Name for the new Organization</code> and <code>GitLab Project</code> must have the same value.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/new-project-workflow-2.1.png" alt="new project workflow 2.1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/new-project-workflow-2.2.png" alt="new project workflow 2.2">
</div>
</div>
</li>
<li>
<p>Let&#8217;s the execution to finish:</p>
<div class="imageblock">
<div class="content">
<img src="_images/new-project-workflow-3.png" alt="new project workflow 3">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>At this point, the new GitLab repository has been created and the Webhook for the <code>DEV</code> workflow has been created.</p>
</div>
<div class="paragraph">
<p>The Webhook for the <code>PRO</code> workflow has to be created manually, following the steps described at <a href="022-deploy-superadmin-objects.html#_pro_environment" class="xref page">Configure the GitLab Webhooks for the Pro environment</a> <strong>AFTER</strong> promoting the new organization to the <code>PRO</code> environment.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Promote the new organization to PRO</p>
<div class="paragraph">
<p>4.1 Create a Merge Request to promote the <code>dev</code> branch  to the <code>pro</code> branch:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/regular-user-new-mr-to-pro-1.png" alt="regular user new mr to pro 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/regular-user-new-mr-to-pro-2.png" alt="regular user new mr to pro 2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/regular-user-new-mr-to-pro-3.png" alt="regular user new mr to pro 3">
</div>
</div>
<div class="paragraph">
<p>4.2 Create a Tag at the <code>pro</code> branch to deploy the new Organization:</p>
</div>
<div class="paragraph">
<p>In some cases, the GitLab.com pipelines only work if GitLab.com account used have registered the information of a valid Credit Card.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitlab-pipeline-failing-notice.png" alt="gitlab pipeline failing notice">
</div>
</div>
<div class="paragraph">
<p>If it&#8217;s not the case, the pipeline that is automatically creating the Tag just after merging the Merge Request, will not work and the tag will not be generated automatically, so it&#8217;s needed to generate it manually:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/regular-user-new-tag-1.png" alt="regular user new tag 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/regular-user-new-tag-2.png" alt="regular user new tag 2">
</div>
</div>
</li>
<li>
<p>Create the Webhook for the <code>PRO</code> workflow following the steps described at <a href="022-deploy-superadmin-objects.html#_pro_environment" class="xref page">Configure the GitLab Webhooks for the Pro environment</a>.</p>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_manually">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To create the new objects, a new git branch is needed, as the branches used to deploy the CasC to the different environments are protected, doesn&#8217;t accept direct pushes and only accept merges through Pull Requests.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that the required environment variables are properly set. See the <a href="021-initial-dir-and-files.html#_export_all_the_variables_to_be_used_in_the_next_steps" class="xref page">Export all the variables to be used in the next steps</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the playbook to create the new organization objects</p>
<div class="paragraph">
<p>These new objects can be created manually without any problem, but a playbook is provided to make this easier. It must be executed from the command line (PR are welcome), and is creating all the files with the new objects for us, except the one for the organization&#8217;s admin user.</p>
</div>
<div class="paragraph">
<p>To create the new objects, just run the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ansible-playbook new_project.yml -e "{organization_name: ${SUPERADMIN_ORG}, organization_desc: '${SUPERADMIN_ORG} Organization', instance_groups: [MADRID], admin_user: 'neworgadminuser', orgs_vars: 'orgs_vars', orgs: '${SUPERADMIN_ORG}', env: dev, casc_gitlab_scm_branch: dev} -e@gitlab.credentials.yaml"</code></pre>
</div>
</div>
<details>
<summary class="title">See the output</summary>
<div class="content">
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

PLAY [localhost] *****************************************************************************************************************************************************************************************************************************

TASK [Assert that the required input variables are defined] **********************************************************************************************************************************************************************************
ok: [localhost] =&gt; (item=Check the required variable organization_name is defined)
ok: [localhost] =&gt; (item=Check the required variable organization_desc is defined)
ok: [localhost] =&gt; (item=Check the required variable instance_groups is defined)
ok: [localhost] =&gt; (item=Check the required variable admin_user is defined)

TASK [Create all the required objects] *******************************************************************************************************************************************************************************************************
changed: [localhost] =&gt; (item=Creating the file orgs_vars/sadm/env/common/controller_organizations.d/NewOrg.yml)
changed: [localhost] =&gt; (item=Creating the file orgs_vars/sadm/env/common/controller_projects.d/NewOrg_casc.yml)
changed: [localhost] =&gt; (item=Creating the file orgs_vars/sadm/env/common/controller_job_templates.d/NewOrg_casc.yml)
changed: [localhost] =&gt; (item=Creating the file orgs_vars/sadm/env/dev/controller_credentials.d/NewOrg_casc.yml)
changed: [localhost] =&gt; (item=Creating the file orgs_vars/sadm/env/common/controller_roles.d/NewOrg.yml)

TASK [Show manual steps] *********************************************************************************************************************************************************************************************************************
ok: [localhost] =&gt; {
    "msg": [
        "Remember to:",
        "  - Add the user neworgadminuser manually at orgs_vars/sadm/env/dev/controller_users.d/controller_user_accounts.yml"
    ]
}

PLAY RECAP ***********************************************************************************************************************************************************************************************************************************
localhost                  : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</code></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Add the admin user for the new organization</p>
<div class="paragraph">
<p>In order to add the new Organization&#8217;s admin user, it must be done manually as the file should be ansible-vaulted, so the following steps are needed:</p>
</div>
</li>
<li>
<p>Add a new entry at the <code>controller_user_accounts.yml</code> file (it can also be a new one) into the desired environment (dev in the example):</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ansible-vault edit orgs_vars/${SUPERADMIN_ORG}/env/dev/controller_users.d/controller_user_accounts.yml</code></pre>
</div>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
controller_user_accounts:
  - username: "admin"
    password: "SuperadminPassword"
    email: "superadmin@example.com"
    firstname: "superadmin"
    lastname: "superadmin"
    is_auditor: False
    is_superuser: True
    update_secrets: False

  - username: "neworgadminuser"
    password: "NewUserPassword"
    email: "neworgadminuser@example.com"
    firstname: "neworgadminuser"
    lastname: "neworgadminuser"
    is_auditor: False
    is_superuser: False
    update_secrets: False
...</code></pre>
</div>
</div>
</li>
<li>
<p>Push the changes to create the new objects</p>
<div class="paragraph">
<p>As the SUPERADMIN organization already have the Webhook configured, the only action needed to create the new objects is just to push the code to the git repository for the Webhook to trigger the CasC processes:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">git checkout -b ${SUPERADMIN_ORG}
git add -A .
git commit -m "New Organization ${SUPERADMIN_ORG}"
git push -u origin ${SUPERADMIN_ORG}</code></pre>
</div>
</div>
<details>
<summary class="title">See the output</summary>
<div class="content">
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[centralize_casc e5fd56e] orgs_vars/superadmin/env/dev/controller_credentials.d/NewOrg_casc.yml updated
[centralize_casc e5fd56e] orgs_vars/superadmin/env/dev/controller_users.d/controller_user_accounts.yml updated
[centralize_casc e5fd56e] orgs_vars/superadmin/env/common/controller_job_templates.d/NewOrg_casc.yml updated
[centralize_casc e5fd56e] orgs_vars/superadmin/env/common/controller_organizations.d/NewOrg.yml updated
[centralize_casc e5fd56e] orgs_vars/superadmin/env/common/controller_projects.d/NewOrg_casc.yml updated
[centralize_casc e5fd56e] orgs_vars/superadmin/env/common/controller_roles.d/NewOrg.yml updated
 6 file changed, 83 insertions(+), 3 deletions(-)
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 12 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 1.00 KiB | 1.00 MiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote:
remote: To create a merge request for centralize_casc, visit:
remote:   https://gitlab.server.domain/group/sub-group/casc/super-admin/-/merge_requests/new?merge_request%5Bsource_branch%5D=centralize_casc
remote:
To ssh://gitlab.server.domain:2222/group/sub-group/casc/super-admin.git
   ad54fd5..e5fd56e  centralize_casc -&gt; centralize_casc</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Now, the branch can be merged into dev to trigger the CasC mechanism and get all the new objects created at the Automation Controller.</p>
</div>
</li>
<li>
<p>Run the Job Template to create a new Git Project for the newly created organization</p>
<div class="paragraph">
<p>Another thing that should be created is a git repository where to define all the new organization&#8217;s related objects. That git repo can be created manually, but a Job Template for the SUPERADMIN organization is provided to make things easier. That Job template is creating (thanks to the <code>casc-setup</code> collection into the assigned Execuction Environment) all the basic objects and a <code>README.md</code> that contains a step by step process to start working with the repo and the CasC, so it&#8217;s very recommended to use that Job Template:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitlab_project_creation_jt.png" alt="gitlab project creation jt">
</div>
<div class="title">Figure 1. Gitlab Project Creation Job Template</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitlab_project_creation_launch.png" alt="gitlab project creation launch">
</div>
<div class="title">Figure 2. Gitlab Project Creation Launch</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitlab_project_creation_readme_snap.png" alt="gitlab project creation readme snap">
</div>
<div class="title">Figure 3. Gitlab Project Creation README Snap</div>
</div>
</li>
<li>
<p>Run the Job Template to create the CasC Webhook for the newly created organization</p>
<div class="paragraph">
<p>The same way the CasC is triggered for the SUPERADMIN organization, for the newly created one a webhook must be created as well. That one is slightly different on how the playbook treats the input information, but is running the same overall process to launch the CasC processes.</p>
</div>
<div class="paragraph">
<p>The configuration is almost the same shown at the previous section: <a href="022-deploy-superadmin-objects.html#_configure_the_gitlab_webhooks" class="xref page">Configure the GitLab Webhooks</a>, but the organization name and the Job Template that is executed from the webhook, will be different:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/configure_webhook_neworg_launch_params.png" alt="configure webhook neworg launch params">
</div>
<div class="title">Figure 4. Configure Webhook for the ${SUPERADMIN_ORG} Organization</div>
</div>
</li>
<li>
<p>Create the Webhook for the <code>PRO</code> workflow following the steps described at <a href="022-deploy-superadmin-objects.html#_pro_environment" class="xref page">Configure the GitLab Webhooks for the Pro environment</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="022-deploy-superadmin-objects.html">Deploy the SuperAdmin objects</a></span>
  <span class="next"><a href="031-regularuser-day-zero.html#_export_all_the_variables_to_be_used_in_the_next_steps">Export all the variables to be used in the next steps</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="3">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
